List of stuffs to do:

Roms:

- conversion de upgrade TI92+ en .ROM: marche pas

ExtendeD:

- bug sur Step Out


Kevin:

- La conversion des ROMs au format 89u n'a pas l'air de marcher
correctement. À chaque lancement, il me redemande d'importer une ROM avec le
wizard, alors que je venais de le faire au lancement d'avant (j'ai pris une
TI89OS209.89u). Et la calculatrice émulée résultante ne peut même pas être
allumée. Avec un .rom, ça marche.

- Je ne sais pas si on peut y faire quelque chose, mais Alt+ESC, Ctrl+ESC,
Alt+TAB (quand on les appuie en même temps et pas l'une après l'autre) sont
avalées par Windows, pour Alt+F4, Windows ne le voit pas, mais TiEmu non
plus, et il y a probablement d'autres combines de touches "suspectes".

- Si j'appuie sur la touche Windows et que je reviens à TiEmu ensuite, il
ne répond plus à aucun appui de touches (mais on peut le fermer à travers le
popup au moins). L'"engine" est "stoppée" et pas re"start"ée.

- Le débogueur est toujours très lent. :-( Déjà, le défilement du curseur
vers le bas pourrait être plus rapide. Et ensuite tout ce qui touche au
single-step rame à fond si on a la fenêtre des registres activée, cacher la
fenêtre des registres le rend nettement plus rapide ("lent, mais utilisable"
plutôt que "très lent"). Je suspecte la coloration des registres modifiés en
rouge d'être à l'origine de la lenteur.

Lionel:

* le transfert d'un fichier vers TIEmu par F10 donne
une erreur 400 dans la fenêtre command-line (mais n'a
pas l'air de planter l'émulateur). Il faut faire un
Reset Calculator pour avoir une calculette à nouveau
d'aplomb.

+ F8 ne fait "silencieusement" pas l'appel complet 
à une subroutine, mais seulement une partie.
Actuellement, TIEmu s'arrête manifestement après le
premier rts rencontré, ce qui n'est bon que si la
subroutine n'appelle pas elle-même de subroutines.
Je ne vois que la solution "compter le niveau des
subroutines". Je ne pense pas qu'il soit une bonne
idée d'attendre que le pointeur de pile soit revenu 
à la même valeur (ça ne marchera pas dans plusieurs 
cas de figure

+ Sur la V200, la table des ROM_CALLs est trouvée à 
l'adresse 0x000000 (qui est en fait manifestement 
une copie de 0x200000 au moment où il charge la 
table, l'init de la RAM est sûrement faite après). 

+ la fenêtre Stack Frame ne semble pas updatée en 
temps réel.

+ F2 ne marche plus pour mettre un breakpoint. 
Peut-être lié aux six warnings
(tiemu.exe:936): Gtk-WARNING **: gtkwidget.c:3075: 
widget 'GtkToolButoon' has no activatable signal 
"clicked" without arguments'.

* La fenêtre qui affiche les noms de ROM_CALLs est 
difficile à utiliser, car on ne peut pas accéder à 
un ROM_CALL en tapant les premières lettres, et il 
faut savoir le numéro du ROM_CALL pour pouvoir y 
accéder. A l'affichage, inverse simplement juste le 
nom et le numéro (en gardant l'adresse, c'est bien).
Au fait, si on sélectionne un ROM_CALL qui a une 
adresse invalide (ce qui arrive souvent quand la 
table des ROM_CALLs est trouvée à 0x000000), par 
exemple l'adresse 30390020, le désassembleur devrait 
aller à l'adresse 390020 (les 24 bits de poids 
faible), comme le fait le Memory View, plutôt que 
d'aller à l'adresse 303900.

+ il faudrait une indication que le curseur est sur 
la première instruction d'un ROM_CALL. Si c'est 
difficile de faire comme VTI (noms au milieu du 
désassemblage), je ne sais pas, une façon similaire 
à celle de Command Post Plus (afficher le nom du 
ROM_CALL dans la status line - ici, en-dessous de 
Symbol: [...] par exemple) suffit.

+ F8 ne compte pas le niveau des subroutines, cela 
rend moins facile le debug (surtout que F2 ne marche 
plus, comme dit plus haut). Il m'est difficile de 
m'habituer à ce que F8 ne marche pas sur les 
branches...

+ Au passage, un autre bug que je connais depuis 
longtemps dans le désassembleur de VTI/ttdasm mais 
que je n'ai pas pensé à te signaler: l'instruction 
STOP est mal désassemblée. STOP est une instruction 
sans taille dont l'adressage (un unique mot 
immédiat) est implicite: "STOP #$2700".
Contrairement à celui de VTI il me semble, l'UAE de 
TIEmu l'émule correctement (TIEmu n'arrive jamais 
sur le bra.s).
Il y a un tel STOP à 2008F6 sur la ROM de V200 
(boucle infinie d'erreur à laquelle l'exécution 
finit actuellement par arriver sur la ROM de V200).

* j'ai de nouveau des problèmes avec le caractère 0x09
dans la fenêtre ASCII de la memory view (Win ME ?).

+ la fenêtre des registres est un poil trop petite en
hauteur pour voir toutes les infos sans scroller.


-------------
+ done
* in progress
- to do...

List of stuffs to do (in French, sorry):

ExtendeD
========

* Pouvoir envoyer un fichier en le glissant déplaçant vers la calc
serait pratique, comme sous VTI.

* Un bug non reproduit : l'ouverture du débugger faisait défiler très
rapidement toute seule la fenêtre Code sans s'arrêter à n'importe quel
adresses (trop hautes pour être du code).


Kevin
=====

* Un truc qui serait bien serait une fonction "breakpoint on program entry".
Mais comme la feature dans VTI est implémentée plutôt avec les pieds, il
faudrait qu'on discute de ça ensemble pour ne pas faire les mêmes erreurs.
Le problème n°1 dans VTI est sa manière foireuse de récupérer l'adresse du
heap. Voici une méthode qui fonctionne:
 move.l $c8,a3 ;get ROM call table address
 cmp.l #$441,-4(a3) ;check if HeapTable is present
 bcs.s getheap_ams1
 lea.l $441*4(a3),a0 ;get address of HeapTable
 move.l a0,(a4)+ ;set Heap
 bra.s getheap_ams2
getheap_ams1:
 move.l HeapDeref*4(a3),a0
 clr.w (a4)+
 move.w 8(a0),(a4)+ ;set Heap
getheap_ams2:
Ceci devrait être facilement implémentable en C dans l'émulateur, ce ne sont
que des lookups d'adresses. Ce code pourrait aussi être utilisé pour
afficher une fenêtre "Handles" comme le fait VTI.

* Tiens, encore un bogue: lors du chargement de AMS 2.09 pour V200 en v2u, la
première fois, j'ai converti, puis choisi la nouvelle ROM dans la liste, et
TiEmu a planté (fenêtre de plantage Windows). La deuxième fois, la ROM était
déjà dans la liste, je l'ai choisie et tout a marché...

*  Tiens, je viens de t'écrire un mail:
Tiens, encore un truc, dans le débogueur cette fois-ci: Actuellement, F8 sur
un trap rentre dans un trap. Pourrais-tu s'il te plaît faire en sorte que F8
ne rentre pas dans le trap, mais le traîte comme un JSR? VTI fait ça et
c'est bien pratique. En revanche, F7 devrait rentrer dans le trap.

* Et encore un autre bogue: l'écriture en FlashROM n'est pas émulée correctement, même si je saute tous mes astuces anti-débogage, HW3Patch ne fonctionne pas.
Et pour le problème de Flash: Les écritures en 0x812d50-0x812d5f (word par word) ne sont effectivement pas passées! Les écritures en 0x83be8c/0x83be8d, 0x83be90/0x83be91, 0x83be96/0x83be97 et 0x83be9c/0x83be9d (word par word aussi) sont passées.
Peut-être que ta protection anti-écriture est trop large, elle concerne seulement le boot (0x800000-0x80ffff).

* Autre bogue, la fenêtre heap affiche n'importe quoi sous AMS 3.01.

Lionel
======

* Un bug bizarre, dont les instructions de
reproduction semblent être:
        * utiliser un AMS "récent" (2.07+), sur une 92+ ou
V200 (peut-être 89 aussi ?).
        * aller dans la fenêtre de debug, partie sélection
des ROM_CALLs, sélectionner l'un d'entre eux
(_bcd_math par exemple).
        * passer à une AMS 2.05 (testé: ROM dump de 89 avec
certificate).
        * aller dans la fenêtre de debug: TIEmu est parti
dans le décor, je ne sais pas s'il exécute ou pas

* Autre détail: les handles sont tous 2 octets trop
gros. Et je revérifierai, mais je ne suis pas sûr que
tous les handles soient affichés (je ne trouve pas des
fichiers créés).

* Il y a un petit bug dans la fenêtre des breakpoints
(c'est le bug mineur dont je ne me souvenais plus
l'autre fois): quand on a breaké le debugger par F11,
le mode de break est inconnu, et ça affiche <unknown
(bug)>...

roms
====

* MOVEA.W diassembled as MOVEA.L (HeapDeref)

* XML file instead of .ini file with saving of all debuggers parameters (bkpts, window sizes, ...)

-------------
+ done
- in progress
* to do...

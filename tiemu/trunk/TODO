List of stuffs to do (in French, sorry):

ExtendeD
========

* bug sur Step Out

* Les Step over sont anormalement lent, sans raison. Certains bsr de
l'AMS ont des sous-bsr qui ont eux-mêmes plusieurs sous-bsr, etc.,
certains step over sur ces bsr mettent plusieurs dizaines de seconde à
aboutir.

* le link ne marche pas convenablement. Voir plus bas.

* le grayscale ne semble pas fonctionner 
convenablement, quel que soit le réglage du 
nombre de plans et le contraste. J'ai testé avec 
SlimeBall 0.96, tileeng (vieille demo du tilemap 
engine d'ExtGraph, pas disponible dans ExtGraph) 
et dissolve, seuls programmes en niveaux de 
gris de mon rom dump.

- tthdex ne marche pas convenablement, les 
Je ne pourrais pas trop de dire d'où ça vient, mais si c'est idle()
qui pose problème, ce doit être le port $600005 qui est mal émulé.

- l'AI3 ne semble pas être émulée correctement. Le 
programme de test que j'utilise regarde les contenus 
des ports 700014, 70001C, 70001D, 70001F et le 
compteur de ticks d'AI3 (utilisé comme timer sur HW2 
mais pas HW3). Aucun port ne change (70001D devrait 
changer périodiquement, avec FS tantôt à 1 tantôt à 
0), le compteur de ticks reste à 0, et la boucle de 
réaffichage est relancée bien trop souvent.

* sur 89, l'interprétation des touches se mélange 
parfois les pinceaux (4 au lieu de l, 6 au lieu de o,
. au lieu de w).

* le menu qui apparaît par un clic droit sur la 
fenêtre skin+screen de l'émulateur marche 
toujours mal. Au lancement ou après un reset, il ne 
marche pas; une utilisation du menu F12 semble le 
faire marcher définitivement (jusqu'au prochain
reset).

* Alors qu'un AMS est déjà émulé, une importation de ROM puis sa
sélection lance une erreur (en popup) :
GGdk-ERROR **: file gdkgc-win32.c: line 905 (gdk_win32_hdc_get):
assertion failed: (win32_gc->hdc == NULL)
Puis TiEmu quitte. Après un redémarrage de TiEmu, il n'y a plus de
problème à la sélection de la ROM.

* J'ai aussi plusieurs crash de cause difficile à déterminer en
utilisant le débogueur. Il y en a peut-être un lié à la fonction
'disable' de breakpoint.

* Pouvoir envoyer un fichier en le glissant déplaçant vers la calc
serait pratique, comme sous VTI. 

---

* Un bug non reproduit : l'ouverture du débugger faisait défiler très
rapidement toute seule la fenêtre Code sans s'arrêter à n'importe quel
adresses (trop hautes pour être du code).


Kevin
=====

* Je ne sais pas si on peut y faire quelque chose, mais Alt+ESC, Ctrl+ESC,
Alt+TAB (quand on les appuie en même temps et pas l'une après l'autre) sont
avalées par Windows, pour Alt+F4, Windows ne le voit pas, mais TiEmu non
plus, et il y a probablement d'autres combines de touches "suspectes".

* Si j'appuie sur la touche Windows et que je reviens à TiEmu ensuite, il
ne répond plus à aucun appui de touches (mais on peut le fermer à travers le
popup au moins). L'"engine" est "stoppée" et pas re"start"ée.

* Le transfert de fichiers ne marche pas: Lors du premier transfert, j'ai:
Link cable error: code = 4, msg = Msg: Timeout occured while writing to the
devi
ce.
Cause: Check that your link cable is plugged and/or the calculator is ready.
starting engine... done.
puis ensuite:
Link cable error: code = 400, msg = Error code not found in the list.
This is a bug. Please report it.

* Dans le débogueur, la fenêtre Breakpoints n'a pas de "QuickInfos" dans la
toolbar. (En revanche, dans la fenêtre Code/Source, ils y sont maintenant.)

* Un truc qui serait bien serait une fonction "breakpoint on program entry".
Mais comme la feature dans VTI est implémentée plutôt avec les pieds, il
faudrait qu'on discute de ça ensemble pour ne pas faire les mêmes erreurs.
Le problème n°1 dans VTI est sa manière foireuse de récupérer l'adresse du
heap. Voici une méthode qui fonctionne:
 move.l $c8,a3 ;get ROM call table address
 cmp.l #$441,-4(a3) ;check if HeapTable is present
 bcs.s getheap_ams1
 lea.l $441*4(a3),a0 ;get address of HeapTable
 move.l a0,(a4)+ ;set Heap
 bra.s getheap_ams2
getheap_ams1:
 move.l HeapDeref*4(a3),a0
 clr.w (a4)+
 move.w 8(a0),(a4)+ ;set Heap
getheap_ams2:
Ceci devrait être facilement implémentable en C dans l'émulateur, ce ne sont
que des lookups d'adresses. Ce code pourrait aussi être utilisé pour
afficher une fenêtre "Handles" comme le fait VTI.

* Tiens, encore un bogue: lors du chargement de AMS 2.09 pour V200 en v2u, la
première fois, j'ai converti, puis choisi la nouvelle ROM dans la liste, et
TiEmu a planté (fenêtre de plantage Windows). La deuxième fois, la ROM était
déjà dans la liste, je l'ai choisie et tout a marché...

* Maintenant que j'ai réussi à envoyer des fichiers, j'ai pu enfin tester
des programmes. L'option 7 niveaux de gris ne marche pas correctement avec
Backgammon. Backgammon est bel et bien en 7 ndg, donc l'option devrait
marcher... Tu peux récupérer Backgammon (y compris les sources de la routine
de gris) sur mon site:
http://members.chello.at/gerhard.kofler/kevin/francais/ti89prog/

* Ce serait bien d'avoir aussi une option 8 niveaux de gris (moyenne de 7
plans plutôt que de 6).

- Il y a apparemment un problème d'adresse d'écran sur la vieille TI-92
aussi (pas seulement sur la Titanium). Quand Backgammon affiche un dialogue
ou quitte vers l'écran HOME, normalement, l'écran devrait être remis sur
LCD_MEM. Ça marche sur une vraie TI-92 et sur VTI, mais pas sur TiEmu, qui
continue à m'afficher l'écran de jeu (maintenant en blanc et noir). Les
lignes utilisées par Backgammon pour Fargo sont:
 move.l   #tios__001c,%d0
 lsr.l    #3,%d0
 move.w   %d0,0x600010                        | restore used plane to
tios__001c

* Les nombres de niveaux de gris interessants sont 2, 4, 7 et 8:
* 2: plane0 (1/1)
* 4: plane0, plane0, plane1 (2/3, 1/3)
* 7: plane2, plane0, plane1, plane0, plane1, plane0 (3/6, 2/6, 1/6)
* 8: plane1, plane0, plane2, plane0, plane0, plane1, plane0 (4/7, 2/7, 1/7)


Lionel
======

* le transfert d'un fichier vers TIEmu par F10 donne
une erreur 400 dans la fenêtre command-line (mais n'a
pas l'air de planter l'émulateur). Il faut faire un
Reset Calculator pour avoir une calculette à nouveau
d'aplomb.

* j'ai de nouveau des problèmes avec le caractère 0x09
dans la fenêtre ASCII de la memory view (Win ME ?).

* Bon point pour la possibilité de sélectionner un
ROM_CALL à travers son nom, et de ne plus aller aux
ROM_CALLs non disponibles. Petite suggestion: si un
ROM_CALL est dans la RAM, il faudrait aller plutôt
dans la fenêtre Memory (comme la VTI de JM)

* Toujours le problème avec TAB (0x09) mal interprété.
J'utilise le GTK téléchargé en même temps que The GIMP
2.0.5, un GTK+ du 01/10/2004, version 2.4.10.

* Un bug bizarre, dont les instructions de
reproduction semblent être:
        * utiliser un AMS "récent" (2.07+), sur une 92+ ou
V200 (peut-être 89 aussi ?).
        * aller dans la fenêtre de debug, partie sélection
des ROM_CALLs, sélectionner l'un d'entre eux
(_bcd_math par exemple).
        * passer à une AMS 2.05 (testé: ROM dump de 89 avec
certificate).
        * aller dans la fenêtre de debug: TIEmu est parti
dans le décor, je ne sais pas s'il exécute ou pas

me/moi
======

* le clavier ne fonctionne plus sur PedRom en rev $697 (idle).
Due à idle: il suffit de décommenter "if(!(arg & 0x10))" sur le port $600005.

-------------
+ done
- in progress
* to do...
